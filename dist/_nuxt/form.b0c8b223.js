import{_ as re}from"./HeaderCustom.vue.9f05ba53.js";import{_ as ie,a as ce}from"./Times.b3063182.js";import{_ as z}from"./Search.5e392179.js";import{_ as E}from"./_plugin-vue_export-helper.c27b6911.js";import{o as p,c as m,a as e,f as Y,g as G,t as c,b as x,h as P,r as b,i as J,j as g,v as Q,k as W,l as q,m as t,n as L,F as Z,q as X,s as ee,x as te,p as le,e as se,y as H,z as N,A as R,B as de,C as ue,D as _e,E as fe,G as pe,w as me}from"./entry.9da6a2f2.js";const ve={name:"MaterialSymbolsDeleteOutline"},he={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},be=e("path",{fill:"currentColor",d:"M7 21q-.825 0-1.413-.588T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.588 1.413T17 21H7ZM17 6H7v13h10V6ZM9 17h2V8H9v9Zm4 0h2V8h-2v9ZM7 6v13V6Z"},null,-1),xe=[be];function we(_,v,y,S,r,u){return p(),m("svg",he,xe)}const ge=E(ve,[["render",we]]),ye={class:"w-full flex min-h-[3rem] items-center bg-slate-600 p-1 sm:pl-1 text-white"},$e={class:"grow",style:{"padding-left":"10px"}},oe=Y({__name:"HeaderPopup",props:{title:{type:String,required:!1,default:""},fn:{type:Function,required:!1}},setup(_){const v=_,y=G(),S=()=>{v.fn?v.fn():y.go(-1)};return(r,u)=>{const f=ie;return p(),m("div",ye,[e("div",$e,c(_.title||" "),1),e("div",{class:"text-center w-10 cursor-pointer",onClick:u[0]||(u[0]=w=>S())},[x(f,{class:"text-2xl text-white"})])])}}});const D=_=>(le("data-v-482b5cd3"),_=_(),se(),_),ke={class:"box-fixed"},Se={class:"w-full flex p-1"},Me={class:"grow"},Ce=D(()=>e("div",{class:"font-bold"}," Keyword ",-1)),De={class:"pl-1"},Ve=D(()=>e("div",{class:"font-bold"}," Sort By ",-1)),Ae=D(()=>e("option",{value:""},null,-1)),He=D(()=>e("option",{value:"email"},"Email",-1)),Te=D(()=>e("option",{value:"fullname"},"Fullname",-1)),Ue=[Ae,He,Te],je={class:"pl-1"},qe=D(()=>e("div",{class:"font-bold"}," Sort Order ",-1)),Ie=D(()=>e("option",{value:"asc"},"Asc",-1)),Oe=D(()=>e("option",{value:"desc"},"Desc",-1)),Be=[Ie,Oe],Fe={class:"flex items-end pl-1"},Le={class:"w-full flex justify-center items-center grow h-0 p-1"},Ne={key:0,class:""},Re={class:"tacky"},ze=D(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Email"),e("th",null,"Fullname"),e("th",null,"Role"),e("th",null,"Tanggal Dibuat"),e("th",null,"Tanggal Diubah")])],-1)),Ee=["onClick"],Pe={class:"bold"},Ze={class:"d-flex",style:{"justify-content":"end",padding:"5px"}},Ke={__name:"users",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1}},setup(_){const v=_,{$moment:y}=te(),S=P("token"),r=b([]),u=b(""),f=b({field:"",by:"asc"}),w=b(-1),s=b({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),l={};l._TimeZoneOffset=new Date().getTimezoneOffset();const V=()=>{l.like="",u.value!=""&&(l.like=`id:%${u.value}%,email:%${u.value}%,fullname:%${u.value}%`),l.sort="",f.value.field&&(l.sort=f.value.field+":"+f.value.by)},$=b(null),T=async()=>{H().loading_full=!0,s.value.may_get_data=!1,l.page=s.value.page,l.page==1&&(r.value=[]);const{data:i,error:o,status:M}=await N("/api/users",{method:"get",headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},params:l,retry:0},"$hpgj4YuTob");if(H().loading_full=!1,s.value.may_get_data=!0,M.value==="error"){R().trigger(o);return}s.value.page==1?(r.value=i.value.data,$.value&&($.value.scrollTop=0)):s.value.page>1&&(r.value=[...r.value,...i.value.data]),i.value.data.length==0&&(s.value.is_last_record=!0)},I=async()=>{if(!s.value.may_get_data)return;let i=$.value;if(i.scrollLeft!=s.value.scrollLeft){s.value.scrollLeft=i.scrollLeft;return}s.value.is_last_record||!(Math.round(i.scrollTop)+i.clientHeight>=i.scrollHeight-1)||(s.value.page++,await T())},U=()=>{s.value.page=1,s.value.is_last_record=!1,V(),T()},A=()=>{w.value>-1?v.fnSelect(r.value[w.value]):v.fnSelect({id:"",email:"",fullname:""})};return J(()=>v.show,(i,o)=>{i==!0&&U()},{immediate:!0}),(i,o)=>{const M=oe,O=z;return g((p(),m("section",ke,[e("div",null,[x(M,{title:"Search And Select Employees",fn:_.fnClose,class:"w-100 d-flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Se,[e("div",Me,[Ce,g(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>W(u)?u.value=a:null),name:"search",placeholder:"Keyword"},null,512),[[q,t(u)]])]),e("div",De,[Ve,g(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":o[1]||(o[1]=a=>t(f).field=a)},Ue,512),[[L,t(f).field]])]),e("div",je,[qe,g(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":o[2]||(o[2]=a=>t(f).by=a)},Be,512),[[L,t(f).by]])]),e("div",Fe,[e("button",{class:"w-full border-black border-solid border-2 p-1",type:"button",name:"button",onClick:o[3]||(o[3]=a=>U())},[x(O,{class:"text-2xl"})])])]),e("div",Le,[t(r).length==0?(p(),m("div",Ne," Maaf Tidak Ada Record ")):(p(),m("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:$,onScroll:I},[e("table",Re,[ze,e("tbody",null,[(p(!0),m(Z,null,X(t(r),(a,d)=>(p(),m("tr",{key:d,onClick:n=>w.value=d,class:ee(t(w)==d?"active":"")},[e("td",null,c(d+1)+".",1),e("td",Pe,c(a.email),1),e("td",null,c(a.fullname),1),e("td",null,c(a.role),1),e("td",null,c(t(y)(a.created_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,c(t(y)(a.updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,Ee))),128))])])],544))]),e("div",Ze,[e("button",{onClick:o[4]||(o[4]=a=>A()),class:"w-36 m-1 bg-blue-600 text-white p-2 rounded-sm"}," Select ")])])],512)),[[Q,_.show]])}}},Ye=E(Ke,[["__scopeId","data-v-482b5cd3"]]);const k=_=>(le("data-v-05062c10"),_=_(),se(),_),Ge={class:"box-fixed"},Je={class:"w-full flex p-1"},Qe={class:"grow"},We=k(()=>e("div",{class:"font-bold"}," Keyword ",-1)),Xe={class:"pl-1"},et=k(()=>e("div",{class:"font-bold"}," Sort By ",-1)),tt=k(()=>e("option",{value:""},null,-1)),lt=k(()=>e("option",{value:"Username"},"Username",-1)),st=k(()=>e("option",{value:"email"},"Email",-1)),ot=k(()=>e("option",{value:"fullname"},"Fullname",-1)),at=[tt,lt,st,ot],nt={class:"pl-1"},rt=k(()=>e("div",{class:"font-bold"}," Sort Order ",-1)),it=k(()=>e("option",{value:"asc"},"Asc",-1)),ct=k(()=>e("option",{value:"desc"},"Desc",-1)),dt=[it,ct],ut={class:"flex items-end pl-1"},_t={class:"w-full flex justify-center items-center grow h-0 p-1"},ft={key:0,class:""},pt={class:"tacky"},mt=k(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Fullname"),e("th",null,"Tanggal Dibuat"),e("th",null,"Tanggal Diubah")])],-1)),vt=["onClick"],ht={class:"bold"},bt={class:"d-flex",style:{"justify-content":"end",padding:"5px"}},xt={__name:"members",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1}},setup(_){const v=_,{$moment:y}=te(),S=P("token"),r=b([]),u=b(""),f=b({field:"",by:"asc"}),w=b(-1),s=b({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),l={};l._TimeZoneOffset=new Date().getTimezoneOffset();const V=()=>{l.like="",u.value!=""&&(l.like=`username:%${u.value}%,email:%${u.value}%,fullname:%${u.value}%`),l.sort="",f.value.field&&(l.sort=f.value.field+":"+f.value.by)},$=b(null),T=async()=>{H().loading_full=!0,s.value.may_get_data=!1,l.page=s.value.page,l.page==1&&(r.value=[]);const{data:i,error:o,status:M}=await N("/api/members",{method:"get",headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},params:l,retry:0},"$kvzPLjlvci");if(H().loading_full=!1,s.value.may_get_data=!0,M.value==="error"){R().trigger(o);return}s.value.page==1?(r.value=i.value.data,$.value&&($.value.scrollTop=0)):s.value.page>1&&(r.value=[...r.value,...i.value.data]),i.value.data.length==0&&(s.value.is_last_record=!0)},I=async()=>{if(!s.value.may_get_data)return;let i=$.value;if(i.scrollLeft!=s.value.scrollLeft){s.value.scrollLeft=i.scrollLeft;return}s.value.is_last_record||!(Math.round(i.scrollTop)+i.clientHeight>=i.scrollHeight-1)||(s.value.page++,await T())},U=()=>{s.value.page=1,s.value.is_last_record=!1,V(),T()},A=()=>{w.value>-1?v.fnSelect(r.value[w.value]):v.fnSelect({id:"",username:"",email:"",fullname:""})};return J(()=>v.show,(i,o)=>{i==!0&&U()},{immediate:!0}),(i,o)=>{const M=oe,O=z;return g((p(),m("section",Ge,[e("div",null,[x(M,{title:"Search And Select Members",fn:_.fnClose,class:"w-100 d-flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Je,[e("div",Qe,[We,g(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>W(u)?u.value=a:null),name:"search",placeholder:"Keyword"},null,512),[[q,t(u)]])]),e("div",Xe,[et,g(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":o[1]||(o[1]=a=>t(f).field=a)},at,512),[[L,t(f).field]])]),e("div",nt,[rt,g(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":o[2]||(o[2]=a=>t(f).by=a)},dt,512),[[L,t(f).by]])]),e("div",ut,[e("button",{class:"w-full border-black border-solid border-2 p-1",type:"button",name:"button",onClick:o[3]||(o[3]=a=>U())},[x(O,{class:"text-2xl"})])])]),e("div",_t,[t(r).length==0?(p(),m("div",ft," Maaf Tidak Ada Record ")):(p(),m("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:$,onScroll:I},[e("table",pt,[mt,e("tbody",null,[(p(!0),m(Z,null,X(t(r),(a,d)=>(p(),m("tr",{key:d,onClick:n=>w.value=d,class:ee(t(w)==d?"active":"")},[e("td",null,c(d+1)+".",1),e("td",ht,c(a.username),1),e("td",null,c(a.email),1),e("td",null,c(a.fullname),1),e("td",null,c(t(y)(a.internal_created_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,c(t(y)(a.internal_updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,vt))),128))])])],544))]),e("div",bt,[e("button",{onClick:o[4]||(o[4]=a=>A()),class:"w-36 m-1 bg-blue-600 text-white p-2 rounded-sm"}," Select ")])])],512)),[[Q,_.show]])}}},wt=E(xt,[["__scopeId","data-v-05062c10"]]),gt={class:"w-full h-full flex flex-col"},yt={class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},$t={class:"w-full align-items-center justify-content-center grow overflow-auto"},kt={class:"w-full flex flex-col flex-wrap p-1"},St=e("label",{for:""},"Name",-1),Mt={class:"text-red-500"},Ct={class:"w-full flex flex-col flex-wrap p-1"},Dt=e("label",{for:""},"Address",-1),Vt={class:"text-red-500"},At={class:"w-full flex flex-col flex-wrap p-1"},Ht=e("label",{for:""},"Contact Number",-1),Tt={class:"text-red-500"},Ut={class:"w-full flex flex-col flex-wrap p-1"},jt=e("label",{for:""},"Contact Person",-1),qt={class:"text-red-500"},It={class:"w-full flex flex-col flex-wrap p-1"},Ot=e("label",{for:""},"Active Until",-1),Bt={class:"text-red-500"},Ft={class:"w-full flex flex-col flex-wrap p-1"},Lt=e("label",{for:""},"Marketer",-1),Nt={class:"w-full flex flex-row flex-wrap border-black border-solid border-2"},Rt={key:0,class:"w-full flex"},zt=e("div",{class:"flex items-center grow p-1"}," Pilih Karyawan ",-1),Et={key:1,class:"w-full flex",style:{}},Pt={class:"flex flex-row flex-wrap grow"},Zt={class:"p-1"},Kt=e("div",{class:"text-sm text-gray-600"},"ID",-1),Yt={class:"bold"},Gt={class:"p-1"},Jt=e("div",{class:"text-sm text-gray-600"},"Email",-1),Qt={class:"bold"},Wt={class:"text-red-500"},Xt={class:"w-full flex flex-col flex-wrap p-1"},el=e("label",{for:""},"Operator",-1),tl={class:"w-full flex flex-row flex-wrap border-black border-solid border-2"},ll={key:0,class:"w-full flex"},sl=e("div",{class:"flex items-center grow p-1"}," Pilih Member ",-1),ol={key:1,class:"w-full flex",style:{}},al={class:"flex flex-row flex-wrap grow"},nl={class:"p-1"},rl=e("div",{class:"text-sm text-gray-600"},"ID",-1),il={class:"bold"},cl={class:"p-1"},dl=e("div",{class:"text-sm text-gray-600"},"Username",-1),ul={class:"bold"},_l={class:"text-red-500"},fl={class:"w-full flex items-center justify-end"},xl=Y({__name:"form",async setup(_){let v,y;de();const S=P("token"),r=b({}),u=G(),f=ue();let w={id:"",email:"",fullname:""},s={id:"",username:"",email:"",fullname:""};const{data:l}=([v,y]=_e(async()=>fe(async()=>{const d=f.query.id;if(d!==void 0&&d!==""){H().loading_full=!0;const{data:n,error:j,status:B}=await N("/api/institute",{method:"get",headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},params:{id:d},retry:0},"$bPPeSMnGJh");if(H().loading_full=!1,B.value==="error")R().trigger(j,r);else{let C=n.value.data;return C.members.length>0?C.operator_member=C.members[0]:C.operator_member={...s},C}}return{id:-1,email:"",fullname:"",password:"",role:"Institute",can_login:"0",internal_marketer:{...w},operator_member:{...s}}},"$B1N4oerOMC")),v=await v,y(),v);let V=b(!1);const $=()=>{l.value.internal_marketer={...w}},T=()=>{V.value=!0},I=()=>{V.value=!1},U=d=>{l.value.internal_marketer=d,V.value=!1};let A=b(!1);const i=()=>{l.value.operator_member={...s}},o=()=>{A.value=!0},M=()=>{A.value=!1},O=d=>{l.value.operator_member=d,A.value=!1},a=async()=>{H().loading_full=!0,r.value={};let d={name:l.value.name,address:l.value.address,contact_number:l.value.contact_number,contact_person:l.value.contact_person,internal_marketer_id:l.value.internal_marketer.id,operator_member_id:l.value.operator_member.id},n="post",j=f.query.id;j===""||(n="put",d.id=j);const{data:B,error:C,status:F}=await N("/api/institute",{method:n,headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},body:d,retry:0},"$f2eU0ZMMSG");if(H().loading_full=!1,F.value==="error"){R().trigger(C,r);return}u.go(-1)};return(d,n)=>{const j=re,B=pe("vue-date-picker"),C=ce,F=z,K=ge,ae=Ye,ne=wt;return p(),m(Z,null,[e("div",gt,[x(j,{title:"Form Institute",back:!0}),e("div",yt,[e("div",$t,[e("div",kt,[St,g(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":n[0]||(n[0]=h=>t(l).name=h)},null,512),[[q,t(l).name]]),e("p",Mt,c(t(r).name),1)]),e("div",Ct,[Dt,g(e("textarea",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":n[1]||(n[1]=h=>t(l).address=h)},null,512),[[q,t(l).address]]),e("p",Vt,c(t(r).address),1)]),e("div",At,[Ht,g(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":n[2]||(n[2]=h=>t(l).contact_number=h)},null,512),[[q,t(l).contact_number]]),e("p",Tt,c(t(r).contact_number),1)]),e("div",Ut,[jt,g(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":n[3]||(n[3]=h=>t(l).contact_person=h)},null,512),[[q,t(l).contact_person]]),e("p",qt,c(t(r).contact_person),1)]),e("div",It,[Ot,x(C,null,{default:me(()=>[x(B,{class:"border-black border-solid border-2",modelValue:t(l).active_until,"onUpdate:modelValue":n[4]||(n[4]=h=>t(l).active_until=h),"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",Bt,c(t(r).active_until),1)]),e("div",Ft,[Lt,e("div",Nt,[!t(l).internal_marketer||!t(l).internal_marketer.id?(p(),m("div",Rt,[e("button",{onClick:n[5]||(n[5]=h=>T()),class:"flex items-center grow"},[x(F,{class:"text-2xl text-black"}),zt])])):(p(),m("div",Et,[e("div",Pt,[e("div",Zt,[Kt,e("div",Yt,c(t(l).internal_marketer.id),1)]),e("div",Gt,[Jt,e("div",Qt,c(t(l).internal_marketer.email),1)])]),e("button",{class:"w-10 bg-red-600 flex items-center justify-center",onClick:n[6]||(n[6]=h=>$())},[x(K,{class:"text-2xl text-white"})])]))]),e("p",Wt,c(t(r).internal_marketer_id),1)]),e("div",Xt,[el,e("div",tl,[!t(l).operator_member||t(l).operator_member.id==""?(p(),m("div",ll,[e("button",{onClick:n[7]||(n[7]=h=>o()),class:"flex items-center grow"},[x(F,{class:"text-2xl text-black"}),sl])])):(p(),m("div",ol,[e("div",al,[e("div",nl,[rl,e("div",il,c(t(l).operator_member.id),1)]),e("div",cl,[dl,e("div",ul,c(t(l).operator_member.username),1)])]),e("button",{class:"w-10 bg-red-600 flex items-center justify-center",onClick:n[8]||(n[8]=h=>i())},[x(K,{class:"text-2xl text-white"})])]))]),e("p",_l,c(t(r).operator_member_id),1)])]),e("div",fl,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[9]||(n[9]=h=>d.$router.go(-1))}," Cancel "),e("button",{type:"button",name:"button",class:"w-36 m-1 bg-blue-600 text-white p-2 rounded-sm",onClick:n[10]||(n[10]=h=>a())}," Save ")])])]),x(ae,{show:t(V),fnClose:I,fnSelect:U,excludes:"institute_had_which_institute_id"},null,8,["show"]),x(ne,{show:t(A),fnClose:M,fnSelect:O},null,8,["show"])],64)}}});export{xl as default};
